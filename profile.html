<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
	<meta name="color-scheme" content="dark" />
	<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#0f1116" />
	<meta name="application-name" content="Sport Notepad" />
	<title>–ü—Ä–æ—Ñ–∏–ª—å - Sport Notepad</title>
	<link rel="icon" type="image/png" sizes="32x32" href="/icons/tabicon.png" />
	<link rel="apple-touch-icon" sizes="180x180" href="/icons/siteicon.png" />
	<link rel="manifest" href="/manifest.json" />
	<link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet" />
	<link rel="stylesheet" href="./style.css" />
</head>
<body>
	<div class="wrap">
		<header>
			<div class="header-bar">
				<div style="display: flex; align-items: center; gap: 12px;">
					<a href="/main.html" class="pill-btn" title="–ù–∞–∑–∞–¥">‚Üê –ì–ª–∞–≤–Ω–∞—è</a>
				</div>
				<div style="display: flex; align-items: center; gap: 8px;">
					<button class="pill-btn" id="logoutBtn" title="–í—ã–π—Ç–∏">üö™ –í—ã–π—Ç–∏</button>
				</div>
			</div>
			<h1 class="title">üë§ –ü—Ä–æ—Ñ–∏–ª—å</h1>
			<p class="subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–º –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏</p>
		</header>

		<section id="profileContent">
			<div class="cards-grid" style="max-width: 600px; margin: 0 auto;">
				<!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
				<div class="card">
					<div style="text-align: center; margin-bottom: 20px;">
						<p style="font-size: 64px; margin: 0 0 12px;">üë§</p>
						<p style="font-size: 28px; font-weight: 700; margin: 8px 0 16px; background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;" id="accountDisplayName">User</p>
						<p class="muted" style="margin: 0; font-size: 13px;">–¢–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ</p>
					</div>
				</div>

				<!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª–∞ -->
				<div class="card">
					<h3 style="margin: 0 0 12px; font-size: 18px; font-weight: 700;">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª–∞</h3>
					<p class="muted" style="margin: 0 0 16px; font-size: 13px;">–í–ª–∏—è–µ—Ç –Ω–∞ —Ñ–æ—Ä–º—É–ª—É —Ä–∞—Å—á–µ—Ç–∞ –∂–∏—Ä–∞ –∏ –Ω–æ—Ä–º—É –≤–æ–¥—ã</p>
					<div style="margin-bottom: 12px;">
						<label for="accountGender" class="label">–¢–≤–æ–π –ø–æ–ª</label>
						<select id="accountGender" style="width: 100%; padding: 16px 16px; border: 1.5px solid rgba(99, 102, 241, 0.15); border-radius: 12px; background: rgba(37, 45, 61, 0.8); color: var(--text-dark); font-family: inherit; font-size: 16px; cursor: pointer; transition: all 0.3s ease; line-height: 1.8; min-height: 56px;">
							<option value="male" style="background: #1a1f2e; color: #f8f9fb;">‚ôÇÔ∏è –ü–∞—Ä–µ–Ω—å</option>
							<option value="female" style="background: #1a1f2e; color: #f8f9fb;">‚ôÄÔ∏è –î–µ–≤—É—à–∫–∞</option>
						</select>
					</div>
					<p class="muted" id="genderChangeStatus" style="margin: 10px 0 0; font-size: 12px; text-align: center;"></p>
				</div>

				<!-- –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è -->
				<div class="card">
					<div id="changePasswordSection">
						<h3 style="margin: 0 0 16px; font-size: 18px; font-weight: 700;">üîê –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</h3>
						
						<div id="changePasswordForm" style="display: none;">
							<div style="margin-bottom: 14px;">
								<label for="currentPassword" class="label">–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
								<input id="currentPassword" type="password" placeholder="–í–≤–µ–¥–∏ —Ç–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å" />
							</div>
							<div style="margin-bottom: 14px;">
								<label for="newPassword" class="label">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
								<input id="newPassword" type="password" placeholder="–ü—Ä–∏–¥—É–º–∞–π –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å" />
							</div>
							<div style="margin-bottom: 16px;">
								<label for="confirmPassword" class="label">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏ –ø–∞—Ä–æ–ª—å</label>
								<input id="confirmPassword" type="password" placeholder="–ü–æ–≤—Ç–æ—Ä–∏ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å" />
							</div>
							<p class="muted" id="passwordChangeStatus" style="margin: 0 0 16px; font-size: 12px; text-align: center;"></p>
							<div style="display: flex; gap: 8px;">
								<button class="ghost" id="cancelChangePassword" style="flex: 1; padding: 12px; border: none; cursor: pointer; font-weight: 600;">–û—Ç–º–µ–Ω–∞</button>
								<button class="primary" id="saveNewPassword" style="flex: 1; padding: 12px; border: none; cursor: pointer; font-weight: 600;">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
							</div>
						</div>

						<button class="ghost" id="toggleChangePassword" style="width: 100%; padding: 12px; border: none; cursor: pointer; font-weight: 600; background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.2); border-radius: 10px; color: #a5b4fc; transition: all 0.2s;">–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
					</div>
				</div>

				<!-- –û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞ -->
				<div class="card" style="border-color: rgba(239, 68, 68, 0.2); background: rgba(239, 68, 68, 0.05);">
					<h3 style="margin: 0 0 16px; font-size: 18px; font-weight: 700; color: #fca5a5;">‚ö†Ô∏è –û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞</h3>
					<button class="ghost" id="deleteAccountBtn" style="width: 100%; padding: 12px; border: none; cursor: pointer; font-weight: 600; background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 10px; color: #fca5a5; transition: all 0.2s;">–£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
				</div>

				<!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤) -->
				<div class="card" id="adminPanelCard" style="display: none; background: rgba(124, 58, 237, 0.05); border-color: rgba(124, 58, 237, 0.2);">
					<h3 style="margin: 0 0 16px; font-size: 18px; font-weight: 700; color: #c4b5fd;">üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</h3>
					<a href="/admin.html" class="primary" style="width: 100%; padding: 12px; border: none; cursor: pointer; font-weight: 600; background: rgba(124, 58, 237, 0.2); border: 1px solid rgba(124, 58, 237, 0.4); border-radius: 10px; color: #c4b5fd; transition: all 0.2s; display: block; text-align: center; text-decoration: none;">‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
				</div>
			</div>
		</section>
	</div>

	<!-- Footer -->
	<footer class="site-footer">
		<div class="footer-content">
			<p class="footer-text">Made by bdiev</p>
			<div class="footer-links">
				<a href="https://github.com/bdiev" target="_blank" rel="noopener noreferrer" class="footer-link">
					<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
						<path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
					</svg>
					GitHub
				</a>
				<a href="https://www.instagram.com/rightinthemiddleofnowhere/" target="_blank" rel="noopener noreferrer" class="footer-link">
					<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
						<path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
					</svg>
					Instagram
				</a>
			</div>
		</div>
	</footer>

	<script src="./app.js"></script>
	<script>
		// –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω—É—é –µ—Å–ª–∏ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
		document.addEventListener('DOMContentLoaded', async () => {
			try {
				const res = await fetch('/api/me', { credentials: 'include' });
				if (!res.ok) {
					window.location.href = '/';
					return;
				}
				const data = await res.json();
				
				// –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
				const displayName = document.getElementById('accountDisplayName');
				if (displayName) {
					displayName.textContent = data.username || 'User';
				}

				// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–ª
				const genderSelect = document.getElementById('accountGender');
				if (genderSelect && data.gender) {
					genderSelect.value = data.gender;
				}

				// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –µ—Å–ª–∏ –∞–¥–º–∏–Ω
				if (data.is_admin) {
					document.getElementById('adminPanelCard').style.display = 'block';
				}
			} catch (err) {
				console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:', err);
				window.location.href = '/';
			}
		});
	</script>
</body>
</html>
